✅supabaseでサーバーアクションズを使う場合
NEXT_PUBLIC_SUPABASE_URL
NEXT_PUBLIC_SUPABASE_PUBLISHABLE_KEY
GOOGLE_API_KEY
を使って
supabaseをCRUD操作するので、
ブラウザ側に各KEY,URLが露出してしまい、
悪意あるユーザーが自由に Supabase へアクセスできる。
そのため、安全のために CRUD 操作はサーバーアクション内またはルートハンドラーズで実行する。



✅サーバーアクションズ作成方法
★1
クライアントコンポーネントでonSelectやonClickで発火させる場合

発火させる関数の定義を
'use server'を宣言しているファイルに作成し、
そのファイルから関数をクライアントコンポーネントにインポートして使用する
★サーバーアクションを定義するファイルには必ず'use server'を明記する


★2
Supabaseを使う場合、
@supabase/ssr の createServerClient を使用してサーバー用Supabaseクライアントを作成して使用する

createServerClient を使用してのサーバー用Supabaseクライアントのコード例）
import { createServerClient } from '@supabase/ssr'
import { cookies } from 'next/headers'

export async function createClient() {
  const cookieStore = cookies()
  return createServerClient(
    process.env.NEXT_PUBLIC_SUPABASE_URL!,
    process.env.NEXT_PUBLIC_SUPABASE_PUBLISHABLE_KEY!,
    { cookies: cookieStore }
  )
}
）
